{"id":"deco-03s","title":"Define DecoError structure","description":"Create internal/domain/error.go with DecoError struct: Code, Summary, Detail, Location, Context, Suggestion, Related. Include Location and Related types.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:03.2628684+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:27:10.40304+01:00","closed_at":"2026-01-31T14:27:10.40304+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-03s","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:23.4771253+01:00","created_by":"Toernblom"},{"issue_id":"deco-03s","depends_on_id":"deco-16w","type":"blocks","created_at":"2026-01-30T15:26:45.6011273+01:00","created_by":"Toernblom"}]}
{"id":"deco-0hm","title":"Write tests for Issue domain type","description":"TDD: Write failing tests for Issue struct. Test: creation, severity levels, location tracking, resolved state.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:15.5618012+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:16:10.3487616+01:00","closed_at":"2026-01-31T14:16:10.3487616+01:00","close_reason":"Closed"}
{"id":"deco-0jp","title":"Write tests for deco set command","description":"TDD: Write failing tests for set command. Test: sets field value, validates after set, creates history entry, error on invalid path.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:09.665878+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:09.665878+01:00","dependencies":[{"issue_id":"deco-0jp","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:43.8167866+01:00","created_by":"Toernblom"},{"issue_id":"deco-0jp","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:45.2539026+01:00","created_by":"Toernblom"}]}
{"id":"deco-0kr","title":"Implement deco apply command","description":"Create internal/cli/apply.go. Apply patch file for AI integration.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:55.7683266+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:55.7683266+01:00","dependencies":[{"issue_id":"deco-0kr","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:24.9205431+01:00","created_by":"Toernblom"},{"issue_id":"deco-0kr","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:28.6246623+01:00","created_by":"Toernblom"},{"issue_id":"deco-0kr","depends_on_id":"deco-tzg","type":"blocks","created_at":"2026-01-30T15:27:18.0501522+01:00","created_by":"Toernblom"}]}
{"id":"deco-0o3","title":"Implement GraphBuilder service","description":"Create internal/service/graph/builder.go. Build Graph from slice of Nodes, populate reverse reference index.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:47.8947462+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:00:08.0762739+01:00","closed_at":"2026-01-31T15:00:08.0762739+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-0o3","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:16.6683549+01:00","created_by":"Toernblom"},{"issue_id":"deco-0o3","depends_on_id":"deco-jxy","type":"blocks","created_at":"2026-01-30T15:26:46.4135279+01:00","created_by":"Toernblom"}]}
{"id":"deco-0s1","title":"Implement QueryEngine filter","description":"Create internal/service/query/engine.go. Filter nodes by kind, status, tags, or custom predicates.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:41.6983291+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:11:29.8739807+01:00","closed_at":"2026-01-31T15:11:29.8739807+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-0s1","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:18.7324176+01:00","created_by":"Toernblom"},{"issue_id":"deco-0s1","depends_on_id":"deco-3jm","type":"blocks","created_at":"2026-01-30T15:27:12.5040562+01:00","created_by":"Toernblom"}]}
{"id":"deco-0sk","title":"Add contract syntax validator","description":"Create internal/service/validator/contract.go. Validate contract scenarios syntax: given/when/then structure, field types, scenario IDs are unique within node.","status":"open","priority":4,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:01:53.9550117+01:00","created_by":"Anton","updated_at":"2026-01-31T14:01:53.9550117+01:00","dependencies":[{"issue_id":"deco-0sk","depends_on_id":"deco-4ci","type":"blocks","created_at":"2026-01-31T14:02:09.7928452+01:00","created_by":"Anton"}]}
{"id":"deco-142","title":"Implement node rename with ref updates","description":"Create internal/service/refactor/rename.go. Rename node ID and update all references across the graph.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:56.8861579+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:56.8861579+01:00","dependencies":[{"issue_id":"deco-142","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:19.1436774+01:00","created_by":"Toernblom"},{"issue_id":"deco-142","depends_on_id":"deco-bhb","type":"blocks","created_at":"2026-01-30T15:27:15.7802303+01:00","created_by":"Toernblom"}]}
{"id":"deco-16e","title":"Foundation: Project setup and domain types","status":"closed","priority":1,"issue_type":"epic","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:05.6647459+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:21:02.0223711+01:00","closed_at":"2026-01-31T14:21:02.0223711+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-16e","depends_on_id":"deco-rba","type":"blocks","created_at":"2026-01-30T15:18:32.3549532+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-bqg","type":"blocks","created_at":"2026-01-30T15:18:32.6191699+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-zty","type":"blocks","created_at":"2026-01-30T15:18:32.8365093+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-982","type":"blocks","created_at":"2026-01-30T15:18:33.0501122+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-lwx","type":"blocks","created_at":"2026-01-30T15:18:33.2625851+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-rrk","type":"blocks","created_at":"2026-01-30T15:18:33.4894852+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-8ca","type":"blocks","created_at":"2026-01-30T15:18:33.7656803+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-p54","type":"blocks","created_at":"2026-01-30T15:18:34.0203849+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-5ns","type":"blocks","created_at":"2026-01-30T15:18:34.2428644+01:00","created_by":"Toernblom"},{"issue_id":"deco-16e","depends_on_id":"deco-gpu","type":"blocks","created_at":"2026-01-30T15:18:34.4669036+01:00","created_by":"Toernblom"}]}
{"id":"deco-16w","title":"Write tests for DecoError structure","description":"TDD: Write failing tests for DecoError struct. Test: all fields populated, Location type, Related type, Error() method output.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:49.6853879+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:22:15.5905018+01:00","closed_at":"2026-01-31T14:22:15.5905018+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-16w","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:01.3409727+01:00","created_by":"Toernblom"}]}
{"id":"deco-1eg","title":"Implement deco query command","description":"Create internal/cli/query.go. Search nodes with filter expressions, output matching nodes.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:19.5461004+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:19.5461004+01:00","dependencies":[{"issue_id":"deco-1eg","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:23.6882644+01:00","created_by":"Toernblom"},{"issue_id":"deco-1eg","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:27.4588488+01:00","created_by":"Toernblom"},{"issue_id":"deco-1eg","depends_on_id":"deco-vz6","type":"blocks","created_at":"2026-01-30T15:27:07.854897+01:00","created_by":"Toernblom"}]}
{"id":"deco-1er","title":"Write tests for AuditEntry domain type","description":"TDD: Write failing tests for AuditEntry struct. Test: timestamp handling, operation types, before/after state capture.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:21.498645+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:18:27.3379164+01:00","closed_at":"2026-01-31T14:18:27.3379164+01:00","close_reason":"Closed"}
{"id":"deco-1fm","title":"Implement deco validate command","description":"Create internal/cli/validate.go. Load all nodes, build graph, run validation, output errors in Rust-like format.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:04.1675111+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:38:51.3716061+01:00","closed_at":"2026-01-31T15:38:51.3716061+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-1fm","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:23.0306915+01:00","created_by":"Toernblom"},{"issue_id":"deco-1fm","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:26.8897367+01:00","created_by":"Toernblom"},{"issue_id":"deco-1fm","depends_on_id":"deco-sbk","type":"blocks","created_at":"2026-01-30T15:26:58.3159146+01:00","created_by":"Toernblom"}]}
{"id":"deco-1jc","title":"Write tests for YAML line number tracking","description":"TDD: Write failing tests for line/column tracking during YAML parsing. Test: accurate line numbers, column positions, nested structures, multiline values.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:26.2663362+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:45:54.6084917+01:00","closed_at":"2026-01-31T14:45:54.6084917+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-1jc","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:28:00.7627169+01:00","created_by":"Toernblom"}]}
{"id":"deco-1v8","title":"Implement deco append command","description":"Create internal/cli/append.go. Append to array field: deco append \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:32.1695995+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:32.1695995+01:00","dependencies":[{"issue_id":"deco-1v8","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:24.0946659+01:00","created_by":"Toernblom"},{"issue_id":"deco-1v8","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:27.8363386+01:00","created_by":"Toernblom"},{"issue_id":"deco-1v8","depends_on_id":"deco-zix","type":"blocks","created_at":"2026-01-30T15:27:11.6828454+01:00","created_by":"Toernblom"}]}
{"id":"deco-2t4","title":"Write tests for schema Validator","description":"TDD: Write failing tests for schema validation. Test: required fields (id, kind, version, status, title), missing fields, invalid types.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:40.7395243+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:15:40.6252929+01:00","closed_at":"2026-01-31T15:15:40.6252929+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-2t4","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:05.1131248+01:00","created_by":"Toernblom"}]}
{"id":"deco-2y3","title":"Implement Validator orchestrator","description":"Create internal/service/validator/validator.go. Combine schema, refs, constraint validation. Return collected DecoErrors.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:13.2257405+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:18:53.1690222+01:00","closed_at":"2026-01-31T15:18:53.1690222+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-2y3","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:17.709435+01:00","created_by":"Toernblom"},{"issue_id":"deco-2y3","depends_on_id":"deco-az1","type":"blocks","created_at":"2026-01-30T15:27:02.9314052+01:00","created_by":"Toernblom"}]}
{"id":"deco-31k","title":"Implement deco unset command","description":"Create internal/cli/unset.go. Remove field: deco unset \u003cid\u003e \u003cpath\u003e.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:37.578104+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:37.578104+01:00","dependencies":[{"issue_id":"deco-31k","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:24.2989958+01:00","created_by":"Toernblom"},{"issue_id":"deco-31k","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:28.0345545+01:00","created_by":"Toernblom"},{"issue_id":"deco-31k","depends_on_id":"deco-3vb","type":"blocks","created_at":"2026-01-30T15:27:13.341498+01:00","created_by":"Toernblom"}]}
{"id":"deco-336","title":"Write tests for Cobra root command","description":"TDD: Write failing tests for CLI root setup. Test: version flag, help output, global flags, subcommand registration.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:46.4027976+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:29:53.4815866+01:00","closed_at":"2026-01-31T15:29:53.4815866+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-336","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:26.3410462+01:00","created_by":"Toernblom"},{"issue_id":"deco-336","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:27.7841706+01:00","created_by":"Toernblom"}]}
{"id":"deco-344","title":"Write tests for file discovery","description":"TDD: Write failing tests for node file discovery. Test: walking directory tree, .yaml file detection, path-to-ID mapping, ignoring non-yaml files, empty directories.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:20.5505462+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:34:46.8270318+01:00","closed_at":"2026-01-31T14:34:46.8270318+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-344","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:27:56.4092928+01:00","created_by":"Toernblom"}]}
{"id":"deco-3co","title":"Write tests for Patcher append operation","description":"TDD: Write failing tests for append operation. Test: append to array, append to empty array, append to non-array error.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:55.4467485+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.286234+01:00","closed_at":"2026-01-31T15:04:15.286234+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-3co","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:12.3233861+01:00","created_by":"Toernblom"}]}
{"id":"deco-3ip","title":"Implement suggestion engine","description":"Create internal/errors/suggest.go. Generate 'did you mean?' suggestions using Levenshtein distance for typos in refs, kinds, status values.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:24.792438+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:52:30.8947133+01:00","closed_at":"2026-01-31T14:52:30.8947133+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-3ip","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:24.2833759+01:00","created_by":"Toernblom"},{"issue_id":"deco-3ip","depends_on_id":"deco-4dj","type":"blocks","created_at":"2026-01-30T15:26:56.4259267+01:00","created_by":"Toernblom"}]}
{"id":"deco-3jm","title":"Write tests for QueryEngine filter","description":"TDD: Write failing tests for node filtering. Test: filter by kind, status, tags, combined filters, empty results.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:05.1882792+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:10:50.1768357+01:00","closed_at":"2026-01-31T15:10:50.1768357+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-3jm","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:18.4800645+01:00","created_by":"Toernblom"}]}
{"id":"deco-3vb","title":"Write tests for deco unset command","description":"TDD: Write failing tests for unset command. Test: removes field, validates after unset, error on required field.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:14.8779699+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:14.8779699+01:00","dependencies":[{"issue_id":"deco-3vb","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:49.6834601+01:00","created_by":"Toernblom"},{"issue_id":"deco-3vb","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:51.1232099+01:00","created_by":"Toernblom"}]}
{"id":"deco-4ci","title":"Implement contract scenario parser","description":"Create internal/domain/contract.go with Contract, Scenario, Step types. Parse contract.scenarios from YAML into structured domain types.","status":"open","priority":4,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:01:54.5945054+01:00","created_by":"Anton","updated_at":"2026-01-31T14:01:54.5945054+01:00"}
{"id":"deco-4dj","title":"Write tests for suggestion engine","description":"TDD: Write failing tests for did-you-mean suggestions. Test: Levenshtein distance, threshold for suggestions, multiple candidates, no suggestion when too different.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:04.2601776+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:50:56.9098884+01:00","closed_at":"2026-01-31T14:50:56.9098884+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-4dj","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:07.0426019+01:00","created_by":"Toernblom"}]}
{"id":"deco-4q8","title":"Implement deco show command","description":"Create internal/cli/show.go. Show single node details including reverse refs (what uses this node).","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:14.9036249+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:45:14.6597206+01:00","closed_at":"2026-01-31T15:45:14.6597206+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-4q8","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:23.4887582+01:00","created_by":"Toernblom"},{"issue_id":"deco-4q8","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:27.2718993+01:00","created_by":"Toernblom"},{"issue_id":"deco-4q8","depends_on_id":"deco-s5c","type":"blocks","created_at":"2026-01-30T15:27:05.8585963+01:00","created_by":"Toernblom"}]}
{"id":"deco-53i","title":"Implement deco set command","description":"Create internal/cli/set.go. Patch a node field: deco set \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e. Validate after patch.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:26.5019848+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:26.5019848+01:00","dependencies":[{"issue_id":"deco-53i","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:23.8844202+01:00","created_by":"Toernblom"},{"issue_id":"deco-53i","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:27.6459412+01:00","created_by":"Toernblom"},{"issue_id":"deco-53i","depends_on_id":"deco-0jp","type":"blocks","created_at":"2026-01-30T15:27:09.7824719+01:00","created_by":"Toernblom"}]}
{"id":"deco-53k","title":"Write tests for YAML NodeRepository","description":"TDD: Write failing tests for YAML file-based node repository. Test: LoadAll, Load(id), Save(node), Delete(id), Exists(id), handling missing files, invalid YAML, nested directories.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:18.5214424+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:32:29.0023396+01:00","closed_at":"2026-01-31T14:32:29.0023396+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-53k","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:27:54.940438+01:00","created_by":"Toernblom"}]}
{"id":"deco-5fv","title":"Implement error aggregation","description":"Create internal/errors/collector.go. Collect multiple errors during validation, sort by file and line, deduplicate related errors.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:30.5574996+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:57:34.6756694+01:00","closed_at":"2026-01-31T14:57:34.6756694+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-5fv","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:24.4836887+01:00","created_by":"Toernblom"},{"issue_id":"deco-5fv","depends_on_id":"deco-5wv","type":"blocks","created_at":"2026-01-30T15:27:00.694157+01:00","created_by":"Toernblom"}]}
{"id":"deco-5ns","title":"Define ConfigRepository interface","description":"Create internal/storage/config/repository.go with interface: Load, Save for project config.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:15.7963863+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:20:51.2956382+01:00","closed_at":"2026-01-31T14:20:51.2956382+01:00","close_reason":"Closed"}
{"id":"deco-5ry","title":"Implement file discovery for nodes","description":"Walk .deco/nodes/ directory tree, discover all .yaml files, map file paths to node IDs based on relative path.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:42.6400318+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:35:19.6454745+01:00","closed_at":"2026-01-31T14:35:19.6454745+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-5ry","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:14.379321+01:00","created_by":"Toernblom"},{"issue_id":"deco-5ry","depends_on_id":"deco-344","type":"blocks","created_at":"2026-01-30T15:26:50.5039701+01:00","created_by":"Toernblom"}]}
{"id":"deco-5wv","title":"Write tests for error aggregation","description":"TDD: Write failing tests for error collection. Test: multiple errors collected, sorted by file/line, deduplication, max errors limit.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:06.2485657+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:57:34.6458749+01:00","closed_at":"2026-01-31T14:57:34.6458749+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-5wv","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:08.4772745+01:00","created_by":"Toernblom"}]}
{"id":"deco-5xa","title":"Errors: Rust-like error system","status":"closed","priority":1,"issue_type":"epic","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:11.954489+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:57:43.1206952+01:00","closed_at":"2026-01-31T14:57:43.1206952+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-5xa","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:17:35.3836073+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-03s","type":"blocks","created_at":"2026-01-30T15:18:40.8406314+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-7cp","type":"blocks","created_at":"2026-01-30T15:18:41.0314094+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-e9t","type":"blocks","created_at":"2026-01-30T15:18:41.2264361+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-m9l","type":"blocks","created_at":"2026-01-30T15:18:41.440049+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-3ip","type":"blocks","created_at":"2026-01-30T15:18:41.6437292+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-5fv","type":"blocks","created_at":"2026-01-30T15:18:41.8418082+01:00","created_by":"Toernblom"},{"issue_id":"deco-5xa","depends_on_id":"deco-inq","type":"blocks","created_at":"2026-01-30T15:18:42.0468131+01:00","created_by":"Toernblom"}]}
{"id":"deco-6j1","title":"Implement deco history command","description":"Create internal/cli/history.go. Show audit log, optionally filtered by node ID.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:49.8683388+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:49.8683388+01:00","dependencies":[{"issue_id":"deco-6j1","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:24.7152993+01:00","created_by":"Toernblom"},{"issue_id":"deco-6j1","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:28.4146423+01:00","created_by":"Toernblom"},{"issue_id":"deco-6j1","depends_on_id":"deco-7kj","type":"blocks","created_at":"2026-01-30T15:27:16.6201419+01:00","created_by":"Toernblom"}]}
{"id":"deco-747","title":"Write tests for deco mv command","description":"TDD: Write failing tests for mv command. Test: renames node, updates all refs, moves file, creates history entry.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:16.5261901+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:16.5261901+01:00","dependencies":[{"issue_id":"deco-747","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:52.6600918+01:00","created_by":"Toernblom"},{"issue_id":"deco-747","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:54.1660366+01:00","created_by":"Toernblom"}]}
{"id":"deco-750","title":"Implement Patcher unset operation","description":"Create internal/service/patcher/unset.go. Remove field at path from node.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:31.3736821+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.4213536+01:00","closed_at":"2026-01-31T15:04:15.4213536+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-750","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:18.2900619+01:00","created_by":"Toernblom"},{"issue_id":"deco-750","depends_on_id":"deco-q41","type":"blocks","created_at":"2026-01-30T15:27:08.8290604+01:00","created_by":"Toernblom"}]}
{"id":"deco-77y","title":"Write tests for ConfigRepository","description":"TDD: Write failing tests for config repository. Test: Load, Save, missing config file handling, invalid config, default values.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:22.4680827+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:36:15.017427+01:00","closed_at":"2026-01-31T14:36:15.017427+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-77y","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:27:57.8340902+01:00","created_by":"Toernblom"}]}
{"id":"deco-7au","title":"Setup Cobra root command","description":"Create cmd/deco/main.go and internal/cli/root.go. Initialize Cobra with root command, version flag, global flags.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:54.8794474+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:29:53.5191667+01:00","closed_at":"2026-01-31T15:29:53.5191667+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-7au","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:22.576821+01:00","created_by":"Toernblom"},{"issue_id":"deco-7au","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:26.5107344+01:00","created_by":"Toernblom"},{"issue_id":"deco-7au","depends_on_id":"deco-336","type":"blocks","created_at":"2026-01-30T15:26:51.3058289+01:00","created_by":"Toernblom"}]}
{"id":"deco-7ba","title":"Implement deco init command","description":"Create internal/cli/init.go. Initialize .deco/ directory with config.yaml and nodes/ folder. Check for existing project.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:59.434768+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:29:53.5793939+01:00","closed_at":"2026-01-31T15:29:53.5793939+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-7ba","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:22.7796292+01:00","created_by":"Toernblom"},{"issue_id":"deco-7ba","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:26.6998482+01:00","created_by":"Toernblom"},{"issue_id":"deco-7ba","depends_on_id":"deco-sz1","type":"blocks","created_at":"2026-01-30T15:26:54.7843336+01:00","created_by":"Toernblom"}]}
{"id":"deco-7cp","title":"Create error code registry","description":"Create internal/errors/codes.go. Define error codes E001-E099 with constants and descriptions. Categories: schema (E001-E019), refs (E020-E039), constraints (E040-E059), parse (E060-E079).","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:09.0955285+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:28:38.8900755+01:00","closed_at":"2026-01-31T14:28:38.8900755+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-7cp","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:23.6779634+01:00","created_by":"Toernblom"},{"issue_id":"deco-7cp","depends_on_id":"deco-8sd","type":"blocks","created_at":"2026-01-30T15:26:47.2426051+01:00","created_by":"Toernblom"}]}
{"id":"deco-7de","title":"Session handover: Error system and storage layer complete","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed Issues (12 total, bringing total to 31/100):\n\n**Error System (Complete Core):**\n1. **deco-03s**: DecoError structure with Rust-like pattern\n   - Implemented Code, Summary, Detail, Location, Context, Suggestion, Related fields\n   - Error() method for string representation\n\n2. **deco-8sd/deco-7cp**: Error code registry\n   - Defined E001-E099 error codes organized by category\n   - Categories: schema, refs, validation, io, graph (E001-E019 per category)\n   - Registry with Lookup, AllCodes, ByCategory, Categories methods\n\n3. **deco-yu5/deco-e9t**: Error formatter\n   - Rust-like formatting with ANSI colors\n   - Source context display with line numbers and column pointers\n   - FormatWithSource for showing code snippets\n   - FormatMultiple for error aggregation\n\n4. **deco-inq**: Error documentation generator\n   - Markdown generation for error code documentation\n   - GenerateMarkdown, GenerateDetailedMarkdown, GenerateCodeList methods\n   - Filters out reserved error codes\n\n**Storage Layer (NodeRepository + ConfigRepository):**\n5. **deco-53k/deco-nkw**: YAML NodeRepository\n   - Full CRUD: LoadAll, Load, Save, Delete, Exists\n   - Nested directory support (e.g., systems/food.yaml)\n   - Error handling for missing files, invalid YAML\n\n6. **deco-344/deco-5ry**: File discovery for nodes\n   - DiscoverAll for walking directory tree\n   - DiscoverByPattern for filtered discovery\n   - PathToID and IDToPath conversion utilities\n\n7. **deco-77y/deco-px9**: ConfigRepository\n   - Load/Save project configuration\n   - Support for custom fields\n   - Default values handling\n\n### Project State:\n- **Tests:** All passing (domain + storage layers)\n- **Coverage:** 31/100 issues closed (31%)\n- **Working tree:** Clean, all changes committed and pushed\n- **Dependencies:** Added gopkg.in/yaml.v3 for YAML parsing\n\n### Architecture Progress:\n```\n✅ Domain Layer: Complete (Node, Graph, Issue, Constraint, Ref, AuditEntry, DecoError)\n✅ Error System: Core complete (structure, registry, formatter, docs)\n   ⏳ Remaining: suggestion engine, error aggregation, YAML context extraction\n✅ Storage Interfaces: Complete (NodeRepository, ConfigRepository, HistoryRepository)\n✅ NodeRepository: Complete (YAML implementation + file discovery)\n✅ ConfigRepository: Complete (YAML implementation)\n⏳ HistoryRepository: Tests + implementation needed\n⏳ Service Layer: Not started (depends on storage completion)\n⏳ CLI Layer: Not started (depends on service + errors)\n```\n\n## Next Steps (Recommended Priority):\n\n### Immediate: Complete Storage Layer\nContinue with remaining repository implementations:\n\n1. **deco-hxq/deco-owf**: HistoryRepository (tests + impl)\n   - Append-only audit log\n   - Query with filtering\n   - JSONL format\n\n2. **deco-1jc/deco-nbv**: YAML line number tracking (tests + impl)\n   - Preserve source locations for error reporting\n   - Integration with DecoError Location field\n\n3. **deco-mvn/deco-m9l**: YAML context extraction (tests + impl)\n   - Extract code context around error locations\n   - Integration with error formatter\n\n### Then: Complete Error System\nFinish remaining error system components:\n\n4. **deco-4dj/deco-3ip**: Suggestion engine (tests + impl)\n   - Generate helpful suggestions based on error context\n   - Integration with DecoError Suggestion field\n\n5. **deco-5wv/deco-5fv**: Error aggregation (tests + impl)\n   - Collect and group related errors\n   - Prevent error cascades\n\n### Then: Service Layer\nAfter storage layer is complete, start on services:\n\n6. **deco-jxy**: GraphBuilder service\n7. **deco-0s1/deco-oam**: QueryEngine\n8. **deco-7yp/deco-h9q**: Patcher service\n9. **deco-az1/deco-2t4/deco-xw8/deco-eft**: Validator orchestrator\n\n## Technical Notes:\n\n### Error System Design:\n- Following Rust compiler error format\n- DecoError is the core error type used throughout\n- ErrorFormatter provides rich, colorized output\n- Error codes E001-E099 organized by category with room for expansion\n\n### Storage Layer Design:\n- Repository pattern for clean abstraction\n- YAML as primary persistence format\n- File-based organization: .deco/nodes/{id}.yaml, .deco/config.yaml, .deco/history.jsonl\n- Support for nested directories matching node ID structure\n\n### Testing Approach:\n- Strict TDD: tests written before implementation\n- All tests use t.TempDir() for isolation\n- Comprehensive coverage of edge cases (missing files, invalid YAML, nested paths)\n\n## Ready to Work:\nRun `bd ready` to see available tasks. Next session should focus on completing the storage layer before moving to services.","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:37:28.3847548+01:00","created_by":"Anton","updated_at":"2026-01-31T14:41:52.8956564+01:00","closed_at":"2026-01-31T14:41:52.8956564+01:00","close_reason":"Closed"}
{"id":"deco-7kj","title":"Write tests for deco history command","description":"TDD: Write failing tests for history command. Test: shows all history, --node filter, --limit flag, output format.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:18.9474827+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:18.9474827+01:00","dependencies":[{"issue_id":"deco-7kj","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:55.6079891+01:00","created_by":"Toernblom"},{"issue_id":"deco-7kj","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:57.0479017+01:00","created_by":"Toernblom"}]}
{"id":"deco-7rp","title":"Implement Patcher set operation","description":"Create internal/service/patcher/set.go. Set a field value at a path in a node. Validate path exists.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:18.7011961+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.3518278+01:00","closed_at":"2026-01-31T15:04:15.3518278+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-7rp","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:17.9041119+01:00","created_by":"Toernblom"},{"issue_id":"deco-7rp","depends_on_id":"deco-aoo","type":"blocks","created_at":"2026-01-30T15:27:05.0143236+01:00","created_by":"Toernblom"}]}
{"id":"deco-7yo","title":"CLI: Command implementations","status":"open","priority":1,"issue_type":"epic","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:10.4055217+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:14:10.4055217+01:00","dependencies":[{"issue_id":"deco-7yo","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:17:35.1896881+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:17:38.3548603+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:17:38.5647768+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-7au","type":"blocks","created_at":"2026-01-30T15:18:41.8969151+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-7ba","type":"blocks","created_at":"2026-01-30T15:18:42.0976771+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-1fm","type":"blocks","created_at":"2026-01-30T15:18:42.3220117+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-qll","type":"blocks","created_at":"2026-01-30T15:18:42.5120137+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-4q8","type":"blocks","created_at":"2026-01-30T15:18:42.7026104+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-1eg","type":"blocks","created_at":"2026-01-30T15:18:42.8983197+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-53i","type":"blocks","created_at":"2026-01-30T15:18:43.0884948+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-1v8","type":"blocks","created_at":"2026-01-30T15:18:43.2838246+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-31k","type":"blocks","created_at":"2026-01-30T15:18:43.4717154+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-vzo","type":"blocks","created_at":"2026-01-30T15:18:43.6601064+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-6j1","type":"blocks","created_at":"2026-01-30T15:18:43.8516144+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-0kr","type":"blocks","created_at":"2026-01-30T15:18:44.039727+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yo","depends_on_id":"deco-c5c","type":"blocks","created_at":"2026-01-30T15:18:44.2400364+01:00","created_by":"Toernblom"}]}
{"id":"deco-7yp","title":"Implement Patcher apply operation","description":"Create internal/service/patcher/apply.go. Apply a patch file (JSON patch format) to nodes.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:36.6779196+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:09:09.6445563+01:00","closed_at":"2026-01-31T15:09:09.6445563+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-7yp","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:18.5299032+01:00","created_by":"Toernblom"},{"issue_id":"deco-7yp","depends_on_id":"deco-h9q","type":"blocks","created_at":"2026-01-30T15:27:10.7341971+01:00","created_by":"Toernblom"}]}
{"id":"deco-8ca","title":"Define AuditEntry domain type","description":"Create internal/domain/history.go for audit log entries. Fields: Timestamp, Operation, NodeID, User, Before, After.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:05.5656486+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.5069805+01:00","closed_at":"2026-01-31T14:19:52.5069805+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-8ca","depends_on_id":"deco-1er","type":"blocks","created_at":"2026-01-30T15:25:39.2814313+01:00","created_by":"Toernblom"}]}
{"id":"deco-8sd","title":"Write tests for error code registry","description":"TDD: Write failing tests for error codes. Test: code uniqueness, code lookup, category ranges (schema E001-E019, refs E020-E039, etc).","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:53.192449+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:27:48.2870317+01:00","closed_at":"2026-01-31T14:27:48.2870317+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-8sd","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:02.7671393+01:00","created_by":"Toernblom"}]}
{"id":"deco-8vg","title":"Session handover: Storage and error system enhancements complete","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed Issues (10 total, bringing total to 41/101 - 40.6%):\n\n**Storage Layer Complete:**\n1. **deco-hxq/deco-owf**: HistoryRepository (tests + implementation)\n   - Append-only JSONL format at .deco/history.jsonl\n   - Thread-safe concurrent writes with mutex\n   - Filtering by NodeID, Operation, User, time range, limit\n   - 15 comprehensive tests, all passing\n\n**Error System Enhancements:**\n2. **deco-1jc/deco-nbv**: YAML line number tracking (tests + implementation)\n   - LocationTracker using yaml.v3 Node with line/column info\n   - Path-based location lookup (dot notation + array indexing)\n   - Support for nested structures, multiline values\n   - GetLocation() and GetValueLocation() methods\n   - 13 comprehensive tests, all passing\n\n3. **deco-mvn/deco-m9l**: YAML context extraction (tests + implementation)\n   - ExtractContext() for surrounding lines\n   - HighlightColumn() for visual error pointers\n   - Edge case handling (start/end of file, CRLF)\n   - Indentation preservation for accurate display\n   - 15 comprehensive tests, all passing\n\n4. **deco-4dj/deco-3ip**: Suggestion engine (tests + implementation)\n   - Levenshtein distance calculation for typo detection\n   - Smart suggestions with 'did you mean?' formatting\n   - Threshold filtering, length similarity scoring\n   - Prefix bonus for better matching\n   - 17 comprehensive tests, all passing\n\n**Epic Closed:**\n5. **deco-elv**: Storage layer epic (all repository implementations complete)\n\n### Project State:\n- **Tests:** All passing (60 total tests across domain, errors, storage)\n- **Coverage:** 41/101 issues closed (40.6%)\n- **Working tree:** Clean, ready to commit\n- **New packages:**\n  - internal/errors/ (suggestions.go)\n  - internal/errors/yaml/ (location.go, context.go)\n  - internal/storage/history/ (jsonl_repository.go)\n\n### Architecture Progress:\n```\n✅ Domain Layer: Complete (Node, Graph, Issue, Constraint, Ref, AuditEntry, DecoError)\n✅ Error System: Enhanced with YAML integration\n   ✅ Core: structure, registry, formatter, docs\n   ✅ YAML: line tracking, context extraction\n   ✅ Suggestions: Levenshtein-based typo suggestions\n   ⏳ Remaining: error aggregation\n✅ Storage Layer: Complete (all repositories implemented)\n   ✅ NodeRepository: YAML + file discovery\n   ✅ ConfigRepository: YAML\n   ✅ HistoryRepository: JSONL append-only\n⏳ Service Layer: Not started (ready to begin)\n⏳ CLI Layer: Not started\n```\n\n## Next Steps (Recommended Priority):\n\n### Immediate: Complete Error System\n1. **deco-5wv/deco-5fv**: Error aggregation (tests + impl)\n   - Collect and group related errors\n   - Prevent error cascades\n   - Integration with DecoError\n\n### Then: Service Layer\nAfter error system is complete, services are unblocked:\n\n2. **deco-jxy/deco-0o3**: GraphBuilder service (tests + impl)\n   - Build dependency graph from nodes\n   - Detect cycles\n   - Topological sort\n\n3. **deco-3jm/deco-oam**: QueryEngine (tests + impl)\n   - Filter nodes by criteria\n   - Search by text\n   - Tag-based queries\n\n4. **deco-h9q/deco-7yp**: Patcher service (tests + impl)\n   - Apply operations to nodes\n   - Set, append, unset, move operations\n   - Atomic updates\n\n5. **deco-az1/deco-2y3**: Validator orchestrator (tests + impl)\n   - Coordinate schema, reference, constraint validation\n   - Collect and format errors\n   - Integration with suggestion engine\n\n### Then: CLI Layer\nAfter services are ready, build the user-facing commands.\n\n## Technical Notes:\n\n### HistoryRepository Design:\n- JSONL format (one JSON object per line)\n- Thread-safe with sync.Mutex\n- File location: .deco/history.jsonl\n- Chronological ordering on query\n- Efficient append-only operations\n\n### YAML Error Integration:\n- yaml.v3.Node preserves line/column info during parsing\n- LocationTracker maps paths to source locations\n- Context extraction for rich error display\n- Column highlighting with ^ pointers\n\n### Suggestion Engine:\n- Levenshtein distance for typo detection\n- Default threshold of 2 edits\n- Prefix matching bonus reduces distance\n- Length similarity as tiebreaker\n- Top 3 suggestions returned\n\n### Testing Approach:\n- Strict TDD: all tests written before implementation\n- Comprehensive edge case coverage\n- Tests use t.TempDir() for isolation\n- All 60 tests passing across packages\n\n## Ready to Work:\nRun `bd ready` to see available tasks. Next session should focus on completing error aggregation, then move to the service layer which is now unblocked.","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:53:25.2476095+01:00","created_by":"Anton","updated_at":"2026-01-31T14:54:47.9005885+01:00","closed_at":"2026-01-31T14:54:47.9005885+01:00","close_reason":"Closed"}
{"id":"deco-934","title":"Session handover: CLI foundation complete","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed: CLI Foundation (5 issues closed)\n\n**Cobra Root Command (2 issues):**\n1. **deco-336**: Write tests for Cobra root command\n   - Tests for version flag, help output, global flags, subcommand registration\n   - 13 comprehensive test cases, all passing\n\n2. **deco-7au**: Implement Cobra root command\n   - cmd/deco/main.go: CLI entry point\n   - internal/cli/root.go: Root command implementation\n   - Global flags: --config (-c), --verbose, --quiet (-q)\n   - Version flag: --version (-v)\n   - Automatic help generation\n\n**Init Command (2 issues):**\n3. **deco-sz1**: Write tests for deco init command\n   - Tests for directory creation, config generation, force flag\n   - Tests for existing project detection\n   - 19 comprehensive test cases, all passing\n\n4. **deco-7ba**: Implement deco init command\n   - internal/cli/init.go: Init command implementation\n   - Creates .deco/ directory structure\n   - Generates config.yaml with sensible defaults\n   - Creates nodes/ subdirectory\n   - --force (-f) flag to reinitialize\n   - Accepts optional directory argument\n\n**Services Epic:**\n5. **deco-t6q**: Closed Services epic (core complete)\n   - All core services implemented and tested\n   - Node rename (deco-142) deferred to Phase 4\n   - Service layer ready for CLI implementation\n\n### Project State:\n- **Tests:** All passing (163 total tests)\n  - CLI: 5 root tests + 19 init tests = 24 tests\n  - Domain: 30 tests\n  - Errors: 38 tests\n  - Services: 102 tests\n  - Storage: 21 tests\n\n- **Coverage:** 76/104 issues closed (73%)\n- **Working tree:** Clean, pushed to remote (commit fa7ab4e)\n- **Dependencies:** Added github.com/spf13/cobra v1.10.2\n\n### Architecture Status:\n```\n✅ Domain Layer: Complete\n✅ Error System: Complete\n✅ Storage Layer: Complete\n✅ Service Layer: Complete (core)\n⏳ CLI Layer: Foundation complete, commands in progress\n   ✅ Root command: Help, version, global flags\n   ✅ Init command: Project initialization\n   ⏳ Validate command: Next priority\n   ⏳ List/Show commands: Read operations\n   ⏳ Set/Append/Unset/Apply: Mutation commands\n   ⏳ Query/History: Advanced features\n   ⏳ Mv command: Advanced (requires deco-142)\n```\n\n## Next Steps: CLI Commands - Phase 1\n\nThe CLI foundation is complete. Continue with core read commands:\n\n### Recommended Priority Order:\n\n**1. Validate Command (deco-sbk/deco-1fm)** - HIGHEST PRIORITY\n   - Use Validator Orchestrator from services\n   - Critical foundation for all mutation commands\n   - Tests schema, references, and constraints\n   - Issue IDs: deco-sbk (tests), deco-1fm (impl)\n\n**2. List Command (deco-wlu/deco-qll)**\n   - Use QueryEngine.Filter() for kind/status/tags\n   - List nodes with filtering\n   - Issue IDs: deco-wlu (tests), deco-qll (impl)\n\n**3. Show Command (deco-s5c/deco-4q8)**\n   - Display node details\n   - Use GraphBuilder for reverse references\n   - Issue IDs: deco-s5c (tests), deco-4q8 (impl)\n\n**4. Query Command (deco-vz6/deco-1eg)**\n   - Advanced filtering and search\n   - Use QueryEngine.Filter() + Search()\n   - Issue IDs: deco-vz6 (tests), deco-1eg (impl)\n\n### Phase 2: Mutation Commands (After Validate)\n\n5. **Set** (deco-0jp/deco-53i): Use Patcher.Set()\n6. **Append** (deco-zix/deco-1v8): Use Patcher.Append()\n7. **Unset** (deco-3vb/deco-31k): Use Patcher.Unset()\n8. **Apply** (deco-tzg/deco-0kr): Use Patcher.Apply() for batch ops\n\n### Phase 3: Advanced Commands\n\n9. **History** (deco-7kj/deco-6j1): Use HistoryRepository\n10. **Mv** (deco-747/deco-vzo + deco-bhb/deco-142): Requires node rename service\n\n### Ready-to-Work Issues:\n```bash\nbd ready\n```\n\nCurrently 14 issues ready to work (no blockers).\n\n## Implementation Notes:\n\n### CLI Pattern Established:\n1. Write tests first (TDD)\n2. Test structure, flags, integration\n3. Implement command using services\n4. All commands use services, never direct storage access\n5. Clean separation: CLI → Services → Storage\n\n### Services Available:\n- **ConfigRepository**: Load/save project config\n- **NodeRepository**: Load/save/delete nodes\n- **HistoryRepository**: Audit log queries\n- **GraphBuilder**: Dependencies, cycles, topological sort, reverse index\n- **QueryEngine**: Filter (kind/status/tags), Search (text)\n- **Patcher**: Set, Append, Unset, Apply (batch with rollback)\n- **Validators**: Schema, Reference, Constraint, Orchestrator\n\n### Test Infrastructure:\n- Use t.TempDir() for isolated test directories\n- Pass directory argument to avoid os.Chdir() issues\n- Test all flags (long and short versions)\n- Test error cases and edge cases\n- Test integration with root command\n\n### Next Session Checklist:\n1. Start with validate command (deco-sbk)\n2. Follow TDD: write tests, verify failure, implement\n3. Use Validator Orchestrator from services\n4. Continue with list and show commands\n5. Build toward mutation commands\n\n## Technical Context:\n\n### Commit Message Format:\n```\n\u003csummary line\u003e\n\n\u003cdetailed changes\u003e\n\nCloses: \u003cissue-ids\u003e\nRelated: \u003crelated-issues\u003e\n\nCo-Authored-By: Claude Sonnet 4.5 \u003cnoreply@anthropic.com\u003e\n```\n\n### Running Commands:\n```bash\ngo test ./...              # All tests\ngo build ./cmd/deco        # Build binary\n./deco --help              # Test CLI\nbd ready                   # Find work\nbd show \u003cid\u003e               # View issue\nbd update \u003cid\u003e --status=in_progress  # Claim work\nbd close \u003cid\u003e              # Complete work\n```\n\n### Validation Command Priority:\nThe validate command is CRITICAL because:\n- All mutation commands should validate before AND after changes\n- Tests the full error system (codes, formatting, suggestions)\n- Exercises all three validators (schema, reference, constraint)\n- Provides confidence in data integrity\n- Required before implementing set/append/unset/apply commands","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T15:31:25.0753185+01:00","created_by":"Anton","updated_at":"2026-01-31T15:33:38.4657329+01:00","closed_at":"2026-01-31T15:33:38.4657329+01:00","close_reason":"Closed"}
{"id":"deco-982","title":"Define Issue domain type","description":"Create internal/domain/issue.go for tracking TBDs/questions in nodes. Fields: ID, Severity, Message, Location, Resolved.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:48.7154145+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.4991645+01:00","closed_at":"2026-01-31T14:19:52.4991645+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-982","depends_on_id":"deco-0hm","type":"blocks","created_at":"2026-01-30T15:25:31.5279543+01:00","created_by":"Toernblom"}]}
{"id":"deco-9ls","title":"Implement constraint Validator","description":"Create internal/service/validator/constraints.go. Evaluate constraint expressions across nodes, report violations with both locations.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:08.2516794+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:18:53.1369731+01:00","closed_at":"2026-01-31T15:18:53.1369731+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-9ls","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:17.5029284+01:00","created_by":"Toernblom"},{"issue_id":"deco-9ls","depends_on_id":"deco-eft","type":"blocks","created_at":"2026-01-30T15:26:59.3609299+01:00","created_by":"Toernblom"}]}
{"id":"deco-aoo","title":"Write tests for Patcher set operation","description":"TDD: Write failing tests for set operation. Test: set existing field, set nested field, set new field, invalid path handling.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:51.9602999+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.2556264+01:00","closed_at":"2026-01-31T15:04:15.2556264+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-aoo","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:10.8798429+01:00","created_by":"Toernblom"}]}
{"id":"deco-az1","title":"Write tests for Validator orchestrator","description":"TDD: Write failing tests for combined validation. Test: all validators run, errors aggregated, proper ordering.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:47.6243971+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:15:40.7307682+01:00","closed_at":"2026-01-31T15:15:40.7307682+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-az1","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:09.4391835+01:00","created_by":"Toernblom"}]}
{"id":"deco-bhb","title":"Write tests for node rename","description":"TDD: Write failing tests for rename operation. Test: ID change, all refs updated, file moved, history entry created.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:10.6809002+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:10.6809002+01:00","dependencies":[{"issue_id":"deco-bhb","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:21.4406116+01:00","created_by":"Toernblom"}]}
{"id":"deco-bqg","title":"Define Node domain type","description":"Create internal/domain/node.go with Node struct: ID, Kind, Version, Status, Title, Tags, Refs, Content, Issues. Include Section and Block types.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:38.8091199+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.4939116+01:00","closed_at":"2026-01-31T14:19:52.4939116+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-bqg","depends_on_id":"deco-ora","type":"blocks","created_at":"2026-01-30T15:25:27.5609055+01:00","created_by":"Toernblom"}]}
{"id":"deco-bx5","title":"Implement schema Validator","description":"Create internal/service/validator/schema.go. Validate nodes against required fields: meta.id, meta.kind, meta.version, meta.status, meta.title.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:57.686703+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:18:53.068085+01:00","closed_at":"2026-01-31T15:18:53.068085+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-bx5","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:17.0853346+01:00","created_by":"Toernblom"},{"issue_id":"deco-bx5","depends_on_id":"deco-2t4","type":"blocks","created_at":"2026-01-30T15:26:52.2252073+01:00","created_by":"Toernblom"}]}
{"id":"deco-c5c","title":"Add shell completion generation","description":"Add Cobra completion command for bash, zsh, fish, powershell.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:16:05.5466948+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:16:05.5466948+01:00","dependencies":[{"issue_id":"deco-c5c","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:25.124744+01:00","created_by":"Toernblom"},{"issue_id":"deco-c5c","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:28.8119102+01:00","created_by":"Toernblom"}]}
{"id":"deco-c5k","title":"Session handover: Foundation complete, error system next","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed (18 issues closed):\n1. **deco-rba**: Initialized Go module and project structure\n   - Created folder structure: cmd/deco/, internal/{domain,storage,service,cli}/\n   - Enhanced .gitignore\n\n2. **Domain Types (TDD)** - All tests written first, then implementations:\n   - **deco-ora/deco-bqg**: Node domain type with validation\n   - **deco-shb/deco-zty**: Graph with CRUD operations\n   - **deco-0hm/deco-982**: Issue tracking (TBDs/questions)\n   - **deco-ll2/deco-lwx**: Constraint (CEL validation rules)\n   - **deco-xjv/deco-rrk**: Ref/RefLink (inter-node references)\n   - **deco-1er/deco-8ca**: AuditEntry (audit log)\n\n3. **Repository Interfaces**:\n   - **deco-p54**: NodeRepository (LoadAll, Load, Save, Delete, Exists)\n   - **deco-5ns**: ConfigRepository (Load, Save) + Config type\n   - **deco-gpu**: HistoryRepository (Append, Query) + Filter type\n\n4. **Error System (started)**:\n   - **deco-16w**: DecoError tests written (Rust-like error structure)\n\n5. **deco-16e**: Closed Foundation epic (all dependencies complete)\n\n### Project State:\n- All tests passing (domain layer complete)\n- Clean architecture: domain types → repository interfaces → (next: implementations)\n- 18/99 issues closed, 13 ready to work\n- Working tree clean, all pushed to remote\n\n## Next Steps (Recommended Priority):\n\n### Immediate: Complete Error System\nThe error system tests are written (deco-16w ✓), next is implementation:\n1. **deco-03s**: Define DecoError structure (BLOCKED by deco-16w, now ready)\n   - Implement DecoError, Location, Related types\n   - Implement Error() method\n   - Make tests pass\n\nThen continue with error system tasks (all now unblocked):\n2. **deco-8sd/deco-7cp**: Error code registry (tests + impl)\n3. **deco-yu5/deco-e9t**: Error formatter (tests + impl)\n4. **deco-inq**: Error documentation generator\n\n### Then: Storage Implementations\nAfter error system, implement repository interfaces:\n1. **deco-53k/deco-nkw**: YAML NodeRepository (tests + impl)\n2. **deco-344/deco-5ry**: File discovery for nodes (tests + impl)\n3. **deco-77y/deco-px9**: ConfigRepository (tests + impl)\n4. **deco-hxq/deco-owf**: HistoryRepository (tests + impl)\n5. **deco-1jc/deco-nbv**: YAML line number tracking (tests + impl)\n6. **deco-mvn/deco-m9l**: YAML context extraction (tests + impl)\n\n### Architecture Notes:\n- Following strict TDD: tests first, then implementation\n- Error system follows Rust-like pattern (Code, Summary, Detail, Location, Context, Suggestion, Related)\n- Storage layer uses repository pattern for testability\n- All domain types have validation methods\n\n### Working Relationship Reminder:\n- CEO: Strategic decisions, unblocking\n- CTO (Claude): Task selection, execution, git management\n- Staff: Subagents for coding tasks","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:24:51.3563485+01:00","created_by":"Anton","updated_at":"2026-01-31T14:36:51.1604231+01:00","closed_at":"2026-01-31T14:36:51.1604231+01:00","close_reason":"Closed"}
{"id":"deco-e9t","title":"Implement error formatter","description":"Create internal/errors/formatter.go. Format DecoError in Rust-like style with colors, line numbers, context lines, and suggestions.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:14.042971+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:30:08.6535194+01:00","closed_at":"2026-01-31T14:30:08.6535194+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-e9t","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:23.8762828+01:00","created_by":"Toernblom"},{"issue_id":"deco-e9t","depends_on_id":"deco-yu5","type":"blocks","created_at":"2026-01-30T15:26:49.7526178+01:00","created_by":"Toernblom"}]}
{"id":"deco-eft","title":"Write tests for constraint Validator","description":"TDD: Write failing tests for constraint evaluation. Test: expression evaluation, cross-node constraints, violation reporting with both locations.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:44.9319516+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:15:40.6960749+01:00","closed_at":"2026-01-31T15:15:40.6960749+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-eft","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:07.9954083+01:00","created_by":"Toernblom"}]}
{"id":"deco-elv","title":"Storage: Repository implementations","status":"closed","priority":1,"issue_type":"epic","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:07.2831947+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:50:01.4251012+01:00","closed_at":"2026-01-31T14:50:01.4251012+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-elv","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:17:34.7975048+01:00","created_by":"Toernblom"},{"issue_id":"deco-elv","depends_on_id":"deco-nkw","type":"blocks","created_at":"2026-01-30T15:18:31.3793989+01:00","created_by":"Toernblom"},{"issue_id":"deco-elv","depends_on_id":"deco-5ry","type":"blocks","created_at":"2026-01-30T15:18:31.5980858+01:00","created_by":"Toernblom"},{"issue_id":"deco-elv","depends_on_id":"deco-px9","type":"blocks","created_at":"2026-01-30T15:18:31.8590352+01:00","created_by":"Toernblom"},{"issue_id":"deco-elv","depends_on_id":"deco-owf","type":"blocks","created_at":"2026-01-30T15:18:32.0970858+01:00","created_by":"Toernblom"},{"issue_id":"deco-elv","depends_on_id":"deco-nbv","type":"blocks","created_at":"2026-01-30T15:18:32.3297741+01:00","created_by":"Toernblom"}]}
{"id":"deco-flq","title":"Session handover: CLI commands (validate, list, show)","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed: CLI Commands - Phase 1 (6 issues closed)\n\n**Validate Command (2 issues):**\n1. **deco-sbk**: Write tests for deco validate command\n   - 24 comprehensive test cases\n   - Tests schema, reference, constraint validation\n   - Tests --quiet flag, error output, exit codes\n   \n2. **deco-1fm**: Implement deco validate command\n   - Uses Validator Orchestrator from services\n   - Exit code 0 on valid, 1 on errors\n   - Rust-like error formatting\n   - All 24 tests passing\n\n**List Command (2 issues):**\n3. **deco-wlu**: Write tests for deco list command\n   - 23 comprehensive test cases\n   - Tests --kind, --status, --tag filters\n   - Tests combined filters, table output\n   \n4. **deco-qll**: Implement deco list command\n   - Uses QueryEngine.Filter() from services\n   - Dynamic table formatting\n   - Multiple filter support with AND logic\n   - All 23 tests passing\n\n**Show Command (2 issues):**\n5. **deco-s5c**: Write tests for deco show command\n   - 19 comprehensive test cases\n   - Tests node display, reverse refs, --json output\n   \n6. **deco-4q8**: Implement deco show command\n   - Uses GraphBuilder.BuildReverseIndex() for reverse refs\n   - Human-readable and JSON output modes\n   - Displays all node fields comprehensively\n   - All 19 tests passing\n\n### Project State:\n- **Tests:** All passing (66 new CLI tests + existing)\n  - CLI total: 24 init + 5 root + 24 validate + 23 list + 19 show = 95 tests\n  - All other test suites: passing (cached)\n- **Coverage:** 83/105 issues closed (79%)\n- **Working tree:** Clean, pushed to remote (commit 48bd30c)\n- **Commands:** init, validate, list, show - all working end-to-end\n\n### Architecture Status:\n```\n✅ Domain Layer: Complete\n✅ Error System: Complete\n✅ Storage Layer: Complete\n✅ Service Layer: Complete\n✅ CLI Layer: Core commands complete\n   ✅ Root command: Help, version, global flags\n   ✅ Init command: Project initialization\n   ✅ Validate command: Schema + ref + constraint validation\n   ✅ List command: Filter by kind/status/tag, table output\n   ✅ Show command: Node details + reverse refs + JSON\n   ⏳ Query command: Advanced filtering (next)\n   ⏳ Set/Append/Unset/Apply: Mutation commands\n   ⏳ Mv command: Node rename\n   ⏳ History command: Audit log\n```\n\n## Next Steps: Continue CLI Commands\n\n### Recommended Priority Order:\n\n**1. Query Command (deco-vz6/deco-1eg)** - NEXT PRIORITY\n   - Advanced filtering and search\n   - Use QueryEngine.Filter() + Search()\n   - Combine filters with text search\n   - Issue IDs: deco-vz6 (tests), deco-1eg (impl)\n\n**2. Set Command (deco-0jp/deco-53i)**\n   - Use Patcher.Set() for field updates\n   - Validate before and after\n   - Issue IDs: deco-0jp (tests), deco-53i (impl)\n\n**3. Append Command (deco-zix/deco-1v8)**\n   - Use Patcher.Append() for arrays\n   - Validate after append\n   - Issue IDs: deco-zix (tests), deco-1v8 (impl)\n\n**4. Unset Command (deco-3vb/deco-31k)**\n   - Use Patcher.Unset() to remove fields\n   - Validate after unset\n   - Issue IDs: deco-3vb (tests), deco-31k (impl)\n\n**5. Apply Command (deco-tzg/deco-0kr)**\n   - Use Patcher.Apply() for batch operations\n   - Support JSON patch format\n   - Issue IDs: deco-tzg (tests), deco-0kr (impl)\n\n**6. History Command (deco-7kj/deco-6j1)**\n   - Use HistoryRepository for audit log\n   - Issue IDs: deco-7kj (tests), deco-6j1 (impl)\n\n**7. Mv Command (deco-747/deco-vzo + deco-bhb/deco-142)**\n   - Requires node rename service (deco-142)\n   - Update all references automatically\n   - Issue IDs: deco-747 (tests), deco-vzo (impl), deco-bhb/deco-142 (rename service)\n\n### Ready-to-Work Issues:\n```bash\nbd ready\n```\n\nCurrently 10 issues ready to work (no blockers).\n\n## Implementation Notes:\n\n### CLI Pattern Established:\n1. Write tests first (TDD) - verify they fail\n2. Implement command using services (never direct storage)\n3. Test structure: command structure, happy path, error cases, flags, integration\n4. All commands follow this structure:\n   - Load config to verify project\n   - Load nodes as needed\n   - Use service layer for business logic\n   - Format output appropriately\n   - Return proper exit codes\n\n### Services Available:\n- **QueryEngine**: Filter (kind/status/tags), Search (text)\n- **Patcher**: Set, Append, Unset, Apply (batch with rollback)\n- **GraphBuilder**: Dependencies, cycles, topological sort, reverse index\n- **Validators**: Schema, Reference, Constraint, Orchestrator\n- **ConfigRepository**: Load/save project config\n- **NodeRepository**: Load/save/delete nodes\n- **HistoryRepository**: Audit log queries\n\n### Test Infrastructure:\n- Use t.TempDir() for isolated test directories\n- Create YAML files directly (no repositories in tests)\n- Pass directory argument to commands\n- Test all flags (long and short versions)\n- Test error cases and edge cases\n- Test integration with root command\n\n### Manual Testing Pattern:\n```bash\ngo test ./...                    # All tests\ngo build ./cmd/deco              # Build binary\n./deco init /tmp/test-project    # Create test project\n./deco validate /tmp/test-project\n./deco list /tmp/test-project\n./deco show \u003cid\u003e /tmp/test-project\n```\n\n## Technical Context:\n\n### Recent Commits:\n- bb64751: Implement validate command (24 tests)\n- 0f7a39a: Implement list command (23 tests)\n- 48bd30c: Implement show command (19 tests)\n\n### Session Workflow:\n1. Check `bd ready` for available work\n2. Claim issue with `bd update \u003cid\u003e --status=in_progress`\n3. Write tests first (TDD)\n4. Verify tests fail\n5. Implement to make tests pass\n6. Add command to cmd/deco/main.go\n7. Manual end-to-end testing\n8. Close issue with `bd close \u003cid\u003e`\n9. Stage, commit, sync, push\n\n### Commit Message Format:\n```\nImplement \u003ccommand\u003e command with \u003ckey features\u003e\n\n\u003cdetailed implementation notes\u003e\n- Test file: X test cases covering...\n- Implementation: Uses \u003cservices\u003e...\n- Integration: Wire up in main.go\n\nAll X tests passing. Manual end-to-end testing confirmed.\n\nCloses: \u003cissue-ids\u003e\n\nCo-Authored-By: Claude Sonnet 4.5 \u003cnoreply@anthropic.com\u003e\n```\n\n### Session End Checklist:\n```\n[x] 1. Close finished issues (bd close \u003cid1\u003e \u003cid2\u003e ...)\n[x] 2. Create handover issue (this issue)\n[x] 3. Sync beads (bd sync)\n[x] 4. Stage and commit code (git add \u0026\u0026 git commit)\n[x] 5. Final sync (bd sync)\n[x] 6. Push to remote (git push)\n```\n\n## Query Command Details (Next Task):\n\nThe query command will be similar to list but with text search capability:\n- Combines filtering (kind/status/tag) with text search\n- Uses QueryEngine.Filter() + QueryEngine.Search()\n- Search is case-insensitive, searches title and summary\n- Output in same table format as list\n- All filters are AND logic\n\nExpected flags:\n- --kind, --status, --tag (same as list)\n- --search or -s for text search term\n- Possibly --json for JSON output\n\nImplementation should be straightforward given list and show examples.","status":"open","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T15:46:31.9150801+01:00","created_by":"Anton","updated_at":"2026-01-31T15:46:31.9150801+01:00"}
{"id":"deco-gpu","title":"Define HistoryRepository interface","description":"Create internal/storage/history/repository.go with interface: Append(entry), Query(filter) for append-only audit log.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:21.1895163+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:20:51.298229+01:00","closed_at":"2026-01-31T14:20:51.298229+01:00","close_reason":"Closed"}
{"id":"deco-h2c","title":"Add contract validation to deco validate command","description":"Integrate contract validator into deco validate orchestrator. Report errors for invalid contract syntax or references.","status":"open","priority":4,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:01:55.8456991+01:00","created_by":"Anton","updated_at":"2026-01-31T14:01:55.8456991+01:00","dependencies":[{"issue_id":"deco-h2c","depends_on_id":"deco-wxh","type":"blocks","created_at":"2026-01-31T14:02:10.057667+01:00","created_by":"Anton"}]}
{"id":"deco-h9q","title":"Write tests for Patcher apply operation","description":"TDD: Write failing tests for patch file application. Test: JSON patch format, multiple operations, rollback on error.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:02.1430771+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:08:23.0834663+01:00","closed_at":"2026-01-31T15:08:23.0834663+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-h9q","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:15.1834563+01:00","created_by":"Toernblom"}]}
{"id":"deco-hxq","title":"Write tests for HistoryRepository","description":"TDD: Write failing tests for append-only history repository. Test: Append(entry), Query(filter), file creation, append-only guarantee, concurrent writes.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:24.3385811+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:43:40.5504674+01:00","closed_at":"2026-01-31T14:43:40.5504674+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-hxq","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:27:59.3043757+01:00","created_by":"Toernblom"}]}
{"id":"deco-im0","title":"Write tests for reverse reference indexing","description":"TDD: Write failing tests for reverse ref computation. Test: used-by index, multiple refs to same node, circular refs, orphan nodes.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:37.9720201+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:01:31.3955485+01:00","closed_at":"2026-01-31T15:01:31.3955485+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-im0","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:03.6859842+01:00","created_by":"Toernblom"}]}
{"id":"deco-inq","title":"Add error documentation generator","description":"Create cmd/deco/docs.go or script to generate error code documentation from registry. Output markdown for docs site.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:35.8091497+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:31:08.0139225+01:00","closed_at":"2026-01-31T14:31:08.0139225+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-inq","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:24.6835382+01:00","created_by":"Toernblom"}]}
{"id":"deco-jna","title":"Implement reference Validator","description":"Create internal/service/validator/refs.go. Check all refs resolve to existing nodes, collect broken refs with suggestions.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:01.7646971+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:18:53.103469+01:00","closed_at":"2026-01-31T15:18:53.103469+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-jna","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:17.2958253+01:00","created_by":"Toernblom"},{"issue_id":"deco-jna","depends_on_id":"deco-xw8","type":"blocks","created_at":"2026-01-30T15:26:55.6139155+01:00","created_by":"Toernblom"}]}
{"id":"deco-jxy","title":"Write tests for GraphBuilder service","description":"TDD: Write failing tests for graph building. Test: building from node slice, handling empty input, populating node map.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:35.4355576+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:00:08.0435268+01:00","closed_at":"2026-01-31T15:00:08.0435268+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-jxy","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:02.2442266+01:00","created_by":"Toernblom"}]}
{"id":"deco-k3j","title":"Implement Patcher append operation","description":"Create internal/service/patcher/append.go. Append value to array field at path.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:25.6004792+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.387267+01:00","closed_at":"2026-01-31T15:04:15.387267+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-k3j","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:18.0975105+01:00","created_by":"Toernblom"},{"issue_id":"deco-k3j","depends_on_id":"deco-3co","type":"blocks","created_at":"2026-01-30T15:27:06.8229494+01:00","created_by":"Toernblom"}]}
{"id":"deco-ll2","title":"Write tests for Constraint domain type","description":"TDD: Write failing tests for Constraint struct. Test: expression storage, message, scope definition.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:17.1773264+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:16:50.6705258+01:00","closed_at":"2026-01-31T14:16:50.6705258+01:00","close_reason":"Closed"}
{"id":"deco-lwx","title":"Define Constraint domain type","description":"Create internal/domain/constraint.go for validation constraints. Fields: Expr, Message, Scope.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:53.7670735+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.5017703+01:00","closed_at":"2026-01-31T14:19:52.5017703+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-lwx","depends_on_id":"deco-ll2","type":"blocks","created_at":"2026-01-30T15:25:33.8221296+01:00","created_by":"Toernblom"}]}
{"id":"deco-m9l","title":"Implement YAML context extraction","description":"Create internal/errors/context.go. Extract surrounding lines from YAML file for error display. Handle edge cases (start/end of file).","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:20.4081378+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:49:41.5586651+01:00","closed_at":"2026-01-31T14:49:41.5586651+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-m9l","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:24.0843762+01:00","created_by":"Toernblom"},{"issue_id":"deco-m9l","depends_on_id":"deco-mvn","type":"blocks","created_at":"2026-01-30T15:26:52.9614976+01:00","created_by":"Toernblom"}]}
{"id":"deco-mvn","title":"Write tests for YAML context extraction","description":"TDD: Write failing tests for context extraction. Test: surrounding lines, start of file, end of file, column highlighting.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:00.9493778+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:48:47.6526925+01:00","closed_at":"2026-01-31T14:48:47.6526925+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-mvn","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:05.6223231+01:00","created_by":"Toernblom"}]}
{"id":"deco-nbv","title":"Add YAML line number tracking","description":"Wrap yaml.v3 decoder to track line/column numbers for each parsed field. Essential for error reporting with locations.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:56.8654048+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:47:35.2166661+01:00","closed_at":"2026-01-31T14:47:35.2166661+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-nbv","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:19.0520924+01:00","created_by":"Toernblom"},{"issue_id":"deco-nbv","depends_on_id":"deco-1jc","type":"blocks","created_at":"2026-01-30T15:27:01.7334017+01:00","created_by":"Toernblom"}]}
{"id":"deco-nkw","title":"Implement YAML NodeRepository","description":"Create internal/storage/node/yaml_repository.go implementing NodeRepository. Parse YAML files from .deco/nodes/, handle nested directories, preserve line numbers for error reporting.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:37.9654509+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:33:34.5787752+01:00","closed_at":"2026-01-31T14:33:34.5787752+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-nkw","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:13.0055101+01:00","created_by":"Toernblom"},{"issue_id":"deco-nkw","depends_on_id":"deco-53k","type":"blocks","created_at":"2026-01-30T15:26:47.7104161+01:00","created_by":"Toernblom"}]}
{"id":"deco-nop","title":"Write tests for QueryEngine search","description":"TDD: Write failing tests for text search. Test: search titles, search content, case insensitivity, partial matches.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:08.3487284+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:10:50.2135732+01:00","closed_at":"2026-01-31T15:10:50.2135732+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-nop","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:19.947583+01:00","created_by":"Toernblom"}]}
{"id":"deco-oam","title":"Implement QueryEngine search","description":"Add text search across node titles, content, and issues.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:47.5146457+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:11:29.9079775+01:00","closed_at":"2026-01-31T15:11:29.9079775+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-oam","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:18.9315899+01:00","created_by":"Toernblom"},{"issue_id":"deco-oam","depends_on_id":"deco-nop","type":"blocks","created_at":"2026-01-30T15:27:14.1430263+01:00","created_by":"Toernblom"}]}
{"id":"deco-ora","title":"Write tests for Node domain type","description":"TDD: Write failing tests for Node struct before implementation. Test: creation, field access, validation of required fields (ID, Kind, Version, Status, Title), serialization/deserialization.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:12.0398927+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:14:49.4766111+01:00","closed_at":"2026-01-31T14:14:49.4766111+01:00","close_reason":"Closed"}
{"id":"deco-owf","title":"Implement HistoryRepository","description":"Create internal/storage/history/jsonl_repository.go implementing HistoryRepository. Append-only JSONL file at .deco/history.jsonl.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:52.9524965+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:44:25.4224599+01:00","closed_at":"2026-01-31T14:44:25.4224599+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-owf","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:17.590436+01:00","created_by":"Toernblom"},{"issue_id":"deco-owf","depends_on_id":"deco-hxq","type":"blocks","created_at":"2026-01-30T15:26:57.4374151+01:00","created_by":"Toernblom"}]}
{"id":"deco-p54","title":"Define NodeRepository interface","description":"Create internal/storage/node/repository.go with interface: LoadAll, Load(id), Save(node), Delete(id), Exists(id).","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:10.9458634+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:20:51.2929517+01:00","closed_at":"2026-01-31T14:20:51.2929517+01:00","close_reason":"Closed"}
{"id":"deco-pqf","title":"Implement reverse reference indexing","description":"In GraphBuilder, compute 'used-by' reverse refs so we can show what references a node.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:52.1427107+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:01:31.423966+01:00","closed_at":"2026-01-31T15:01:31.423966+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-pqf","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:19:16.8596446+01:00","created_by":"Toernblom"},{"issue_id":"deco-pqf","depends_on_id":"deco-im0","type":"blocks","created_at":"2026-01-30T15:26:48.7477545+01:00","created_by":"Toernblom"}]}
{"id":"deco-px9","title":"Implement ConfigRepository","description":"Create internal/storage/config/yaml_config.go implementing ConfigRepository. Load/save .deco/config.yaml with project settings.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:46.9945942+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:36:33.0877292+01:00","closed_at":"2026-01-31T14:36:33.0877292+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-px9","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:19:15.7736107+01:00","created_by":"Toernblom"},{"issue_id":"deco-px9","depends_on_id":"deco-77y","type":"blocks","created_at":"2026-01-30T15:26:53.7317002+01:00","created_by":"Toernblom"}]}
{"id":"deco-q41","title":"Write tests for Patcher unset operation","description":"TDD: Write failing tests for unset operation. Test: remove field, remove nested field, remove from array, missing field handling.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:58.2038273+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:04:15.3166826+01:00","closed_at":"2026-01-31T15:04:15.3166826+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-q41","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:13.7634956+01:00","created_by":"Toernblom"}]}
{"id":"deco-qll","title":"Implement deco list command","description":"Create internal/cli/list.go. List all nodes with filters: --kind, --status, --tag. Table output format.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:09.8889115+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:41:49.0083771+01:00","closed_at":"2026-01-31T15:41:49.0083771+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-qll","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:23.266278+01:00","created_by":"Toernblom"},{"issue_id":"deco-qll","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:27.0820424+01:00","created_by":"Toernblom"},{"issue_id":"deco-qll","depends_on_id":"deco-wlu","type":"blocks","created_at":"2026-01-30T15:27:04.1213626+01:00","created_by":"Toernblom"}]}
{"id":"deco-rba","title":"Initialize Go module and project structure","description":"Run go mod init, create folder structure: cmd/deco/, internal/domain/, internal/storage/, internal/service/, internal/cli/. Add .gitignore for Go.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:32.9760422+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:13:18.9365676+01:00","closed_at":"2026-01-31T14:13:18.9365676+01:00","close_reason":"Closed"}
{"id":"deco-rrk","title":"Define Ref domain type","description":"Create internal/domain/ref.go for node references. Types: uses, related, emits_events, vocabulary. Include RefLink for resolved refs.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:00.2743012+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.5043553+01:00","closed_at":"2026-01-31T14:19:52.5043553+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-rrk","depends_on_id":"deco-xjv","type":"blocks","created_at":"2026-01-30T15:25:36.7397301+01:00","created_by":"Toernblom"}]}
{"id":"deco-s5c","title":"Write tests for deco show command","description":"TDD: Write failing tests for show command. Test: displays node details, shows reverse refs, handles missing node, --json output.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:03.2086064+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:43:07.4535134+01:00","closed_at":"2026-01-31T15:43:07.4535134+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-s5c","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:38.0120412+01:00","created_by":"Toernblom"},{"issue_id":"deco-s5c","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:39.4605875+01:00","created_by":"Toernblom"}]}
{"id":"deco-sbk","title":"Write tests for deco validate command","description":"TDD: Write failing tests for validate command. Test: exit code 0 on valid, exit code 1 on errors, error output format, --quiet flag.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:54.2300326+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:37:21.7536733+01:00","closed_at":"2026-01-31T15:37:21.7536733+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-sbk","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:32.199527+01:00","created_by":"Toernblom"},{"issue_id":"deco-sbk","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:33.6599643+01:00","created_by":"Toernblom"}]}
{"id":"deco-shb","title":"Write tests for Graph domain type","description":"TDD: Write failing tests for Graph struct. Test: node storage, lookup by ID, iteration, empty graph handling, duplicate ID handling.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:13.8966573+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:15:31.6726611+01:00","closed_at":"2026-01-31T14:15:31.6726611+01:00","close_reason":"Closed"}
{"id":"deco-sz1","title":"Write tests for deco init command","description":"TDD: Write failing tests for init command. Test: creates .deco/, creates config.yaml, creates nodes/, detects existing project, --force flag.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:50.869407+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:29:53.5490126+01:00","closed_at":"2026-01-31T15:29:53.5490126+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-sz1","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:29.2651094+01:00","created_by":"Toernblom"},{"issue_id":"deco-sz1","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:30.7631489+01:00","created_by":"Toernblom"}]}
{"id":"deco-t6q","title":"Services: Business logic layer","notes":"Core services complete: GraphBuilder, Patcher (set/append/unset/apply), QueryEngine (filter/search), Validators (schema/reference/constraint/orchestrator). Node rename (deco-142) deferred to Phase 4 as advanced CLI feature. Service layer is ready for CLI implementation.","status":"closed","priority":1,"issue_type":"epic","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:08.8607203+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:29:49.2219778+01:00","closed_at":"2026-01-31T15:29:49.2219778+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-t6q","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:17:34.9972665+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:17:36.8649569+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-0o3","type":"blocks","created_at":"2026-01-30T15:18:45.4580692+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-pqf","type":"blocks","created_at":"2026-01-30T15:18:45.6529006+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-bx5","type":"blocks","created_at":"2026-01-30T15:18:45.8532475+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-jna","type":"blocks","created_at":"2026-01-30T15:18:46.0426428+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-9ls","type":"blocks","created_at":"2026-01-30T15:18:46.232879+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-2y3","type":"blocks","created_at":"2026-01-30T15:18:46.4245689+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-7rp","type":"blocks","created_at":"2026-01-30T15:18:46.6158991+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-k3j","type":"blocks","created_at":"2026-01-30T15:18:46.8059952+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-750","type":"blocks","created_at":"2026-01-30T15:18:46.9999896+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-7yp","type":"blocks","created_at":"2026-01-30T15:18:47.1872022+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-0s1","type":"blocks","created_at":"2026-01-30T15:18:47.3789916+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-oam","type":"blocks","created_at":"2026-01-30T15:18:47.5743156+01:00","created_by":"Toernblom"},{"issue_id":"deco-t6q","depends_on_id":"deco-142","type":"blocks","created_at":"2026-01-30T15:18:47.7621404+01:00","created_by":"Toernblom"}]}
{"id":"deco-tw3","title":"Session handover: Service layer progress - 54% complete","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed Issues (14 total, bringing total to 55/102 - 53.9%):\n\n**Error System Complete:**\n1. **deco-5wv/deco-5fv**: Error aggregation (tests + implementation)\n   - Collector for aggregating multiple DecoErrors\n   - Sorts by file, line, column; errors without location come last\n   - Deduplicates by code + location (file:line:column)\n   - Max error limit with truncation tracking\n   - Methods: Add, AddBatch, Errors, HasErrors, Count, Truncated, Reset\n   - 17 comprehensive tests, all passing\n\n2. **deco-5xa**: Error system epic CLOSED\n   - All error system work complete\n   - Core error structure, codes, formatter, docs\n   - YAML integration (location tracking, context extraction)\n   - Suggestion engine (Levenshtein distance)\n   - Error aggregation\n\n**Graph Services Complete:**\n3. **deco-jxy/deco-0o3**: GraphBuilder service (tests + implementation)\n   - Build Graph from Node slices with duplicate detection\n   - BuildDependencyMap: extract Refs.Uses relationships\n   - DetectCycle: find circular dependencies with path\n   - TopologicalSort: dependency-ordered node processing\n   - 16 comprehensive tests, all passing\n\n4. **deco-im0/deco-pqf**: Reverse reference indexing (tests + implementation)\n   - BuildReverseIndex: \"who references this node\" lookup\n   - Includes both Uses and Related references\n   - Deduplicates multiple ref types to same target\n   - Only tracks refs to existing nodes (no dangling refs)\n   - 10 comprehensive tests, all passing\n\n**Patcher Service Complete:**\n5. **deco-aoo/deco-7rp**: Patcher set operation (tests + implementation)\n6. **deco-3co/deco-k3j**: Patcher append operation (tests + implementation)\n7. **deco-q41/deco-750**: Patcher unset operation (tests + implementation)\n   - Unified Patcher service in internal/services/patcher/\n   - Set: modify field values with path notation and type conversion\n   - Append: add values to arrays (handles nil, empty, existing arrays)\n   - Unset: remove fields or array elements (protects required fields)\n   - Path support: dot notation (summary), array indexing (tags[0])\n   - Reflection-based with proper type handling\n   - 18 comprehensive tests, all passing\n\n### Project State:\n- **Tests:** All passing (93 total tests across all packages)\n- **Coverage:** 55/102 issues closed (53.9%)\n- **Working tree:** Clean, pushed to remote\n- **New packages:**\n  - internal/errors/collector.go\n  - internal/services/graph/ (builder.go + tests)\n  - internal/services/patcher/ (patcher.go + tests)\n\n### Architecture Progress:\n```\n✅ Domain Layer: Complete (Node, Graph, Issue, Constraint, Ref, AuditEntry, DecoError)\n✅ Error System: Complete (structure, codes, formatter, docs, YAML, suggestions, aggregation)\n✅ Storage Layer: Complete (NodeRepository, ConfigRepository, HistoryRepository)\n⏳ Service Layer: In Progress (3 of ~7 services complete)\n   ✅ GraphBuilder: Build, dependencies, cycle detection, topological sort, reverse index\n   ✅ Patcher: Set, append, unset operations\n   ⏳ Remaining services needed:\n      - QueryEngine (filter, search)\n      - Validator orchestrator (schema, reference, constraint validation)\n      - (Apply operation for Patcher - batch operations)\n⏳ CLI Layer: Not started (depends on services)\n```\n\n## Next Steps (Recommended Priority):\n\n### Immediate: Complete Remaining Service Layer\n\n1. **Patcher Apply Operation** (deco-h9q/deco-7yp)\n   - Apply batch patch operations from JSON/YAML\n   - For AI integration (patch mode)\n   - Should use existing Set/Append/Unset operations\n\n2. **QueryEngine** (deco-3jm/deco-nop + deco-oam/deco-1eg)\n   - Filter nodes by criteria (kind, status, tags, etc.)\n   - Search by text (title, summary, content)\n   - Tag-based queries\n   - Integration with Graph for efficient lookups\n\n3. **Validator Services** (deco-2t4/deco-az1 + implementations)\n   - Schema validator: check required fields, types\n   - Reference validator: verify all refs resolve\n   - Constraint validator: CEL expression evaluation\n   - Validator orchestrator: coordinate all validators, collect errors\n\n### Then: CLI Layer\nAfter all services are complete, the CLI commands can be implemented:\n\n4. **Core Commands** (in dependency order):\n   - deco init (initialize project)\n   - deco validate (schema + refs + constraints)\n   - deco list (list nodes)\n   - deco show \u003cid\u003e (show node + reverse refs)\n   - deco query \u003cfilter\u003e (search/filter)\n   \n5. **Mutation Commands** (use Patcher):\n   - deco set \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e\n   - deco append \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e\n   - deco unset \u003cid\u003e \u003cpath\u003e\n   - deco apply \u003cpatch-file\u003e\n\n6. **Advanced Commands**:\n   - deco mv \u003cold-id\u003e \u003cnew-id\u003e (with ref updates)\n   - deco history [\u003cid\u003e] (audit log)\n\n## Technical Notes:\n\n### Patcher Design:\n- Reflection-based field access via capitalizeFirst() helper\n- Path parsing: splits by \".\", extracts array indices from \"field[N]\"\n- Array index notation: \"tags[0]\" -\u003e field \"Tags\", index 0\n- Map access: \"glossary.term1\" for nested map keys\n- Type conversion: automatic when types are convertible\n- Required fields: id, kind, version, status, title (cannot unset)\n\n### GraphBuilder Design:\n- Dependency map: nodeID -\u003e []string (list of dependency IDs)\n- Only Refs.Uses creates dependencies (Related does not)\n- Cycle detection: DFS with visiting/visited state tracking\n- Topological sort: Kahn's algorithm with in-degree counting\n- Reverse index: targetID -\u003e []string (nodes that reference target)\n\n### Error Collector Design:\n- Deduplication key: code + file + line + column\n- Sort order: file (alpha), line (numeric), column (numeric)\n- Nil locations come last in sort order\n- Count tracks unique errors, not total attempts to add\n\n### Testing Approach:\n- Strict TDD: all tests written before implementation\n- Comprehensive edge cases: empty, nil, invalid, boundaries\n- Clear test names: TestComponent_Behavior pattern\n- All 93 tests passing\n\n## Ready to Work:\nRun `bd ready` to see available tasks. Recommended next session:\n1. Complete Patcher apply operation\n2. Implement QueryEngine (filter + search)\n3. Implement Validators (schema, reference, constraint, orchestrator)\n\nThis will complete the service layer and unblock all CLI commands.","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T15:05:37.9156756+01:00","created_by":"Anton","updated_at":"2026-01-31T15:19:44.905777+01:00","closed_at":"2026-01-31T15:19:44.905777+01:00","close_reason":"Closed"}
{"id":"deco-tzg","title":"Write tests for deco apply command","description":"TDD: Write failing tests for apply command. Test: applies patch file, validates after apply, --dry-run flag, error handling.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:20.6528209+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:20.6528209+01:00","dependencies":[{"issue_id":"deco-tzg","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:58.4769979+01:00","created_by":"Toernblom"},{"issue_id":"deco-tzg","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:59.9117828+01:00","created_by":"Toernblom"}]}
{"id":"deco-vz6","title":"Write tests for deco query command","description":"TDD: Write failing tests for query command. Test: filter expressions, text search, combined filters, output formats.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:07.2480018+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:07.2480018+01:00","dependencies":[{"issue_id":"deco-vz6","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:40.8971074+01:00","created_by":"Toernblom"},{"issue_id":"deco-vz6","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:42.3413738+01:00","created_by":"Toernblom"}]}
{"id":"deco-vzo","title":"Implement deco mv command","description":"Create internal/cli/mv.go. Rename node with automatic ref updates across all nodes.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:15:43.3293723+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:15:43.3293723+01:00","dependencies":[{"issue_id":"deco-vzo","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:19:24.5095363+01:00","created_by":"Toernblom"},{"issue_id":"deco-vzo","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:19:28.2235527+01:00","created_by":"Toernblom"},{"issue_id":"deco-vzo","depends_on_id":"deco-747","type":"blocks","created_at":"2026-01-30T15:27:14.9703002+01:00","created_by":"Toernblom"}]}
{"id":"deco-wlu","title":"Write tests for deco list command","description":"TDD: Write failing tests for list command. Test: lists all nodes, --kind filter, --status filter, --tag filter, table output format.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:59.8866349+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:40:08.4801814+01:00","closed_at":"2026-01-31T15:40:08.4801814+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-wlu","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:35.096517+01:00","created_by":"Toernblom"},{"issue_id":"deco-wlu","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:36.5646253+01:00","created_by":"Toernblom"}]}
{"id":"deco-wxe","title":"Session handover: Service layer complete - 67% done","notes":"## Session Accomplishments (2026-01-31)\n\n### Completed: Service Layer (18 issues closed)\n\n**Patcher Service Complete (2 issues):**\n1. **deco-h9q/deco-7yp**: Patcher Apply operation\n   - Batch patch operations with transactional rollback\n   - Supports set/append/unset in single atomic operation\n   - Snapshot/restore using gob encoding for rollback\n   - 12 comprehensive tests for apply, all passing\n\n**QueryEngine Service Complete (4 issues):**\n2. **deco-3jm/deco-0s1**: QueryEngine Filter\n   - Filter by kind, status, tags (AND logic)\n   - Combined criteria support\n   - 10 comprehensive tests, all passing\n\n3. **deco-nop/deco-oam**: QueryEngine Search  \n   - Case-insensitive partial text search\n   - Searches title and summary fields\n   - 8 comprehensive tests, all passing\n\n**Validator Services Complete (12 issues):**\n4. **deco-2t4/deco-bx5**: SchemaValidator\n   - Validates required fields (ID, Kind, Version, Status, Title)\n   - Unique error summaries for deduplication\n   - 8 comprehensive tests, all passing\n\n5. **deco-xw8/deco-jna**: ReferenceValidator\n   - Validates Uses and Related references resolve\n   - Generates suggestions for typos using Levenshtein distance\n   - 7 comprehensive tests, all passing\n\n6. **deco-eft/deco-9ls**: ConstraintValidator\n   - CEL (Common Expression Language) evaluation\n   - Supports node field access in constraints\n   - 5 comprehensive tests, all passing\n   - Added google/cel-go v0.27.0 dependency\n\n7. **deco-az1/deco-2y3**: Validator Orchestrator\n   - Coordinates all three validators\n   - Aggregates errors using Collector\n   - Runs validators in order: schema → references → constraints\n   - 5 comprehensive tests, all passing\n\n### Project State:\n- **Tests:** All passing (139 total tests)\n  - Domain: 30 tests\n  - Errors: 21 tests + 17 collector tests = 38 tests\n  - Services:\n    - Graph: 26 tests\n    - Patcher: 30 tests\n    - Query: 18 tests\n    - Validator: 28 tests\n  - Storage: 7 + 3 + 11 = 21 tests\n\n- **Coverage:** 69/103 issues closed (67%)\n- **Working tree:** Clean, pushed to remote (commit be200c6)\n\n### Architecture Complete:\n```\n✅ Domain Layer: Complete (Node, Graph, Issue, Constraint, Ref, AuditEntry, DecoError)\n✅ Error System: Complete (structure, codes, formatter, docs, YAML, suggestions, aggregation)\n✅ Storage Layer: Complete (NodeRepository, ConfigRepository, HistoryRepository)\n✅ Service Layer: COMPLETE\n   ✅ GraphBuilder: Build, dependencies, cycle detection, topological sort, reverse index\n   ✅ Patcher: Set, append, unset, apply (batch with rollback)\n   ✅ QueryEngine: Filter (kind/status/tags), Search (text)\n   ✅ Validators: Schema, Reference, Constraint (CEL), Orchestrator\n⏳ CLI Layer: Not started (all dependencies complete!)\n```\n\n## Next Steps: CLI Implementation\n\nThe service layer is now **100% complete**. All business logic is implemented and tested. The next phase is CLI command implementation using Cobra.\n\n### Recommended Priority Order:\n\n**Phase 1: Core Read Commands (Foundation)**\n1. **deco init** (deco-sz1/deco-7ba)\n   - Initialize project structure\n   - Create .deco/ directory\n   - Unblocks: deco validate\n\n2. **deco validate** (deco-sbk/deco-1fm)\n   - Use Validator Orchestrator\n   - Report schema + reference + constraint errors\n   - Unblocks: all mutation commands (validation first)\n\n3. **deco list** (deco-wlu/deco-qll)\n   - Use QueryEngine for filtering\n   - List nodes by kind/status/tags\n   - Unblocks: workflow commands\n\n4. **deco show \u003cid\u003e** (deco-s5c/deco-4q8)\n   - Display node details\n   - Use GraphBuilder for reverse references\n   - Unblocks: none (standalone)\n\n**Phase 2: Query Commands**\n5. **deco query** (deco-vz6/deco-1eg)\n   - Use QueryEngine filter + search\n   - Advanced filtering and search\n   - Unblocks: none\n\n**Phase 3: Mutation Commands (Use Patcher)**\n6. **deco set \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e** (deco-0jp/deco-53i)\n   - Use Patcher.Set()\n   - Validate before/after\n   - Unblocks: none\n\n7. **deco append \u003cid\u003e \u003cpath\u003e \u003cvalue\u003e** (deco-zix/deco-1v8)\n   - Use Patcher.Append()\n   - Unblocks: none\n\n8. **deco unset \u003cid\u003e \u003cpath\u003e** (deco-3vb/deco-31k)\n   - Use Patcher.Unset()\n   - Unblocks: none\n\n9. **deco apply \u003cpatch-file\u003e** (deco-tzg/deco-0kr)\n   - Use Patcher.Apply() for batch operations\n   - Perfect for AI integration\n   - Unblocks: none\n\n**Phase 4: Advanced Commands**\n10. **deco mv \u003cold\u003e \u003cnew\u003e** (deco-747/deco-vzo + deco-bhb/deco-142)\n    - Rename node with reference updates\n    - Use ReferenceValidator to find refs\n    - Use Patcher for updates\n    - Complex but service layer ready\n\n11. **deco history [\u003cid\u003e]** (deco-7kj/deco-6j1)\n    - Use HistoryRepository\n    - Display audit log\n    - Unblocks: none\n\n### Implementation Notes:\n\n**Cobra Setup:**\n- Root command (deco-336/deco-7au) - basic CLI structure\n- Add shell completion (deco-c5c) - nice to have\n\n**Testing Strategy:**\n- Each command has test + implementation issue\n- Test with real YAML files\n- Validate end-to-end workflows\n- Integration tests for command chains\n\n**Service Integration:**\n- All services are ready and tested\n- NodeRepository for loading/saving\n- ConfigRepository for project settings\n- Validators for pre/post mutation checks\n- QueryEngine for filtering/searching\n- Patcher for all mutations\n- GraphBuilder for dependency analysis\n\n### Dependencies Ready:\nAll CLI commands can now be implemented as thin wrappers around services:\n- ✅ Storage layer handles persistence\n- ✅ QueryEngine handles filtering/searching\n- ✅ Patcher handles mutations\n- ✅ Validators handle validation\n- ✅ GraphBuilder handles dependencies\n- ✅ Error system handles reporting\n\n### CLI Epic:\nThe CLI epic (deco-7yo) tracks overall CLI progress. Currently 0/21 CLI commands implemented. Start with init + validate to establish foundation.\n\n## Technical Context:\n\n### Key Design Decisions:\n1. **Transactional Patcher**: Uses gob encoding for deep copy/restore\n2. **CEL Integration**: google/cel-go for constraint expressions\n3. **Error Deduplication**: Code + Summary for errors without location\n4. **Validator Order**: Schema → References → Constraints (fail fast)\n\n### Code Quality:\n- Strict TDD: All tests written before implementation\n- Comprehensive edge cases: nil, empty, invalid, boundaries\n- All 139 tests passing\n- Clear separation of concerns","status":"closed","priority":0,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T15:20:25.4736031+01:00","created_by":"Anton","updated_at":"2026-01-31T15:30:41.920111+01:00","closed_at":"2026-01-31T15:30:41.920111+01:00","close_reason":"Closed"}
{"id":"deco-wxh","title":"Validate contract scenarios reference valid nodes","description":"Ensure contract scenarios only reference nodes/fields that exist in the design graph. Validate expect_event references to actual event definitions.","status":"open","priority":4,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-31T14:01:55.2152087+01:00","created_by":"Anton","updated_at":"2026-01-31T14:01:55.2152087+01:00","dependencies":[{"issue_id":"deco-wxh","depends_on_id":"deco-0sk","type":"blocks","created_at":"2026-01-31T14:02:09.9248246+01:00","created_by":"Anton"}]}
{"id":"deco-xjv","title":"Write tests for Ref domain type","description":"TDD: Write failing tests for Ref and RefLink types. Test: ref types (uses, related, emits_events, vocabulary), resolution state.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:19.6034771+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:17:39.3264371+01:00","closed_at":"2026-01-31T14:17:39.3264371+01:00","close_reason":"Closed"}
{"id":"deco-xw8","title":"Write tests for reference Validator","description":"TDD: Write failing tests for ref validation. Test: valid refs resolve, broken refs detected, suggestion generation for typos.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:42.8887033+01:00","created_by":"Toernblom","updated_at":"2026-01-31T15:15:40.6600298+01:00","closed_at":"2026-01-31T15:15:40.6600298+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-xw8","depends_on_id":"deco-elv","type":"blocks","created_at":"2026-01-30T15:28:06.5415689+01:00","created_by":"Toernblom"}]}
{"id":"deco-yu5","title":"Write tests for error formatter","description":"TDD: Write failing tests for Rust-like error formatting. Test: line numbers, context lines, color output, suggestion display, related locations.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:25:56.580741+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:29:22.8531586+01:00","closed_at":"2026-01-31T14:29:22.8531586+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-yu5","depends_on_id":"deco-16e","type":"blocks","created_at":"2026-01-30T15:29:04.1886553+01:00","created_by":"Toernblom"}]}
{"id":"deco-zix","title":"Write tests for deco append command","description":"TDD: Write failing tests for append command. Test: appends to array, validates after append, error on non-array.","status":"open","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:26:12.3371003+01:00","created_by":"Toernblom","updated_at":"2026-01-30T15:26:12.3371003+01:00","dependencies":[{"issue_id":"deco-zix","depends_on_id":"deco-t6q","type":"blocks","created_at":"2026-01-30T15:28:46.7009781+01:00","created_by":"Toernblom"},{"issue_id":"deco-zix","depends_on_id":"deco-5xa","type":"blocks","created_at":"2026-01-30T15:28:48.1986371+01:00","created_by":"Toernblom"}]}
{"id":"deco-zty","title":"Define Graph domain type","description":"Create internal/domain/graph.go with Graph struct holding nodes map and reverse reference index. Methods for node lookup and traversal.","status":"closed","priority":2,"issue_type":"task","owner":"tornblomanton@gmail.com","created_at":"2026-01-30T15:14:43.6047933+01:00","created_by":"Toernblom","updated_at":"2026-01-31T14:19:52.496569+01:00","closed_at":"2026-01-31T14:19:52.496569+01:00","close_reason":"Closed","dependencies":[{"issue_id":"deco-zty","depends_on_id":"deco-shb","type":"blocks","created_at":"2026-01-30T15:25:29.5662991+01:00","created_by":"Toernblom"}]}
